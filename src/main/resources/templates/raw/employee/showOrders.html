<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Shopping</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
	crossorigin="anonymous">
</head>

<body>
	<div class="container">
		<h3>Products in the store</h3>
		<hr>

		<!-- Add a button -->
		<!-- 		<a th:href="@{/customers/showFormForAdd}"
			class="btn btn-primary btn-sm mb-3">
			Add Customer
		</a> -->

		<!-- <a th:href="@{/cart/viewCart}" class="btn btn-primary btn">Back to orders</a> -->

		<div class="order-status">
			
			<a href="/employee/showOrders" 
			th:if="${STATUS==null}"
			class="badge bg-primary text-decoration-none">All</a>
			<a href="/employee/showOrders" 
			th:if="${STATUS!=null}"
			class="badge bg-secondary text-decoration-none">All</a>
			
			
			<a href="/employee/showOrders?status=pending" 
			th:if="${STATUS == 'pending'}"
			class="badge bg-primary text-decoration-none">pending</a>
			<a href="/employee/showOrders?status=pending" 
			th:if="${STATUS != 'pending'}"
			class="badge bg-secondary text-decoration-none">pending</a>
			
			<a href="/employee/showOrders?status=confirmed" 
			th:if="${STATUS=='confirmed'}"
			class="badge bg-primary text-decoration-none">confirmed</a>
			<a href="/employee/showOrders?status=confirmed" 
			th:if="${STATUS!='confirmed'}"
			class="badge bg-secondary text-decoration-none">confirmed</a>
			
			<a href="/employee/showOrders?status=refused" 
			th:if="${STATUS=='refused'}"
			class="badge bg-primary text-decoration-none">refused</a>
			<a href="/employee/showOrders?status=refused" 
			th:if="${STATUS!='refused'}"
			class="badge bg-secondary text-decoration-none">refused</a>
		</div>
		<hr>
		<table class="table table-bordered table-striped">
			<thead class="table-dark">
				<th>Order ID</th>
				<th>Date</th>
				<th>Customer's name</th>
				<th>Phone</th>
				<th>Address</th>
				<th>Total</th>
				<th>Status</th>
				<th>Actions</th>
			</thead>

			<tbody>
				<tr th:each="order : ${ORDERS}">
					<td th:text="${order.id}" />
					<td th:text="${order.dateBuy}" />
					<td th:text="${order.name}" />
					<td th:text="${order.phone}" />
					<td th:text="${order.address}" />
					<td th:text="${order.total}" />
					
					<td th:text="${order.status}"
						th:if="${order.status == 'pending'}"
						class='badge bg-warning' />
						
						<td th:text="${order.status}"
						th:if="${order.status == 'confirmed'}"
						class='badge bg-success' />
						
						<td th:text="${order.status}"
						th:if="${order.status == 'refused'}"
						class='badge bg-danger' />
					
					<td><a
						th:href="@{/employee/showOrderDetails(orderId=${order.id})}"
						class="btn btn-info btn-sm"> Details </a> <br>
						
						<form th:if="${order.status=='pending'}" action="#" th:action="@{/employee/setOrderStatus}"
							method="POST">
							<input type="hidden" th:name="id" th:value="${order.id}" />
							<button type="submit" class="btn btn-primary btn-sm" name='status'
								value='confirmed'>Confirm</button>
							<button type="submit" class="btn btn-warning btn-sm" name='status'
								value='refused'>Refuse</button>
						</form>
				</tr>
			</tbody>
		</table>

		<hr>
		<form action="#" th:action="@{/logout}" method="POST">
			<button type="submit" class="btn btn-outline-info">Logout</button>
		</form>
		<hr>
		<a href="/" class=""> Back to home </a>
	</div>

</body>

</html>